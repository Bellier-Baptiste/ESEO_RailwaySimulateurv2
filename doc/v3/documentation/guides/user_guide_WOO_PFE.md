# MNJS user guide

## Introduction 

The purpose of this document is to help users manipulate the MNJS simulator and 
HMI.

## Summary

- [MNJS user guide](#mnjs-user-guide)
  - [Introduction](#introduction)
  - [Summary](#summary)
  - [MNJS simulator](#mnjs-simulator)
    - [Generate the executable](#generate-the-executable)
  - [HMI](#hmi)
    - [Launch the HMI](#launch-the-hmi)
    - [Dark mode / Light mode](#dark-mode--light-mode)
    - [Destinations](#destinations)
    - [Lines](#lines)
      - [Add lines](#add-lines)
      - [Delete lines](#delete-lines)
      - [Change lines](#change-lines)
    - [Stations](#stations)
      - [Add stations](#add-stations)
      - [Delete stations](#delete-stations)
      - [Merge stations](#merge-stations)
    - [Areas](#areas)
      - [Add areas](#add-areas)
      - [Delete areas](#delete-areas)
      - [Modify area distribution](#modify-area-distribution)
    - [Events](#events)
      - [Add events](#add-events)
      - [Delete events](#delete-events)
    - [Edit a configuration](#edit-a-configuration)
    - [Run a simulation](#run-a-simulation)
    - [Import/Export system](#importexport-system)
    - [Archiving system](#archiving-system)
    - [Stop the HMI](#stop-the-hmi)
  - [Power BI dashboard](#power-bi-dashboard)
  

## MNJS simulator

We have created an HMI so that we don't have to interact with the simulator 
with a large number of command lines. As a result, it is simply necessary to
generate the executable that will be used from the HMI to run the simulation.

### Generate the executable

To generate the executable, you need to run the following command from 
the /network-journey-simulator folder:

```bash
go build .\src\main\metro_simulator.go 
```

## HMI

### Launch the HMI

To launch the HMI, you need to run the RailwayEditor.main() method from the
[RailwayEditor.java](..%2F..%2F..%2F..%2Frailway-editor%2Fsrc%2Fmain%2Fjava%2Forg%2Fexample%2Fmain%2FRailwayEditor.java)  
file.

### Dark mode / Light mode

The HMI has a dark mode and a light mode. To change the mode, you need to click
on the "Dark mode" or "Light mode" button at the top left of the HMI.

Dark mode:
![Dark mode](..%2Fresources%2Fdark_mode.png)

Light mode:
![Light mode](..%2Fresources%2Flight_mode.png)

### Destinations

You can 'teleport' to a destination by selecting it in the top right-hand 
corner. You can enter the destination to find it in the drop-down list.

Destination drop down list:
![Destination drop down list](..%2Fresources%2Fdestination_drop_down_list.png)

### Lines
You can add, delete and change lines.
Lines are numbered from 0 upwards.

#### Add lines

To add a line, you need to click on the "Add " button in the "Line" section of
the toolbar.

![Add line](..%2Fresources%2Fadd_line.png)

#### Delete lines

To delete a line, you need to click on the "Delete" button in the "Line" section
of the toolbar.

![Delete line](..%2Fresources%2Fdelete_line.png)

#### Change lines
In order to change lines, you need to create at least two lines.

To change lines, you need to click on the down arrow to decrease the line 
number and the up arrow to increase it.

Increment line number:
![Increment line number](..%2Fresources%2Fincrement_line.png)

Decrement line number:
![Decrement line number](..%2Fresources%2Fdecrement_line.png)


### Stations

#### Add stations
#### Delete stations
#### Merge stations

### Areas

#### Add areas
#### Delete areas
#### Modify area distribution

### Events

#### Add events
#### Delete events

### Edit a configuration

### Run a simulation

### Import/Export system

### Archiving system

### Stop the HMI

## Power BI dashboard

Power BI is a data visualization tool that allows you to create dashboards.
We have created a dashboard that allows you to visualize the data generated by
the simulator. To use it, you need to install Power BI Desktop and open the
file located in doc/v3/power_bi/dashboard.pbix :

[dashboard](..%2Fpower_bi%2Fdashboard.pbix)

### Change the path to the tickets table

tickets.csv is the file that contains the data on the transactions made by the
passengers. It is located in network-journey-simulator/output/tickets.csv :

[output/tickets.csv](..%2F..%2F..%2F..%2Fnetwork-journey-simulator%2Foutput%2Ftickets.csv)

You can either use the csv file or transform it into an Excel file.

After opening the dashboard, you need to change the path to tickets.csv. To do
this, you need to follow these steps:

- Go to Home > Transform data
- A window opens
- Check that the "tickets" query is selected in the left column
- Click on the gear icon next to the "Source" step in the right column
- Change to your path to tickets.csv




